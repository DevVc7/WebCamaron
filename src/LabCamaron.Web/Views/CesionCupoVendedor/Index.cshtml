@model List<AsignacionClienteVm>
@{
    ViewData["Title"] = "Cesión Cupo Vendedor";
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ceder Cupo Vendedor</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container mt-4">
        <div class="card">
            <div class="card-header text-center">
                <h5>Ceder Cupo Vendedor</h5>
            </div>
            <div class="card-body">
                <div class="row mb-3 text-center p-2 rounded">
                    <div class="col-md-6">
                        <label for="planificacion" class="form-label">Planificación</label>
                        <input type="text" class="form-control text-center" id="planificacion" value="Ene-25 a Feb-25" disabled>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Laboratorio</label>
                        <div class="row align-items-center">
                            <div class="col-md-4">
                                <input type="text" class="form-control text-center" id="codigoLaboratorio" value="LAB001" disabled>
                            </div>
                            <div class="col-auto px-1">-</div>
                            <div class="col-md-7">
                                <input type="text" class="form-control text-center w-100" id="nombreLaboratorio" value=" Nombre del Laboratorio" disabled>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mb-3 text-center">
                    <div class="col-md-6">
                        <label class="form-label">Vendedor A</label>
                        <select class="form-select text-center w-100" id="nombreVendedorA">
                            <option value="" disabled selected>Seleccione</option>
                            <option value="Jaime Medina">Jaime Medina</option>
                            <option value="Lupita Guadalupe">Lupita Guadalupe</option>
                            <option value="Dipper Antonio">Dipper Antonio</option>
                            <option value="Lucas Renato">Lucas Renato</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Vendedor B</label>
                        <select class="form-select text-center w-100" id="nombreVendedorB">
                            <option value="" disabled selected>Seleccione</option>
                            <option value="Jaime Medina">Jaime Medina</option>
                            <option value="Lupita Guadalupe">Lupita Guadalupe</option>
                            <option value="Dipper Antonio">Dipper Antonio</option>
                            <option value="Lucas Renato">Lucas Renato</option>
                        </select>
                    </div>
                </div>
                <div class="table-container">
                    <div class="border p-3">
                        <table class="table table-bordered text-center" id="tablaVendedorA">
                            <thead>
                                <tr>
                                    <th>Módulo</th>
                                    <th>Cupo Actual</th>
                                    <th>Cupo Cedido</th>
                                    <th>Cupo Nuevo</th>
                                    <th>Acción</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="border p-3">
                        <table class="table table-bordered text-center" id="tablaVendedorB">
                            <thead>
                                <tr>
                                    <th>Módulo</th>
                                    <th>Cupo Actual</th>
                                    <th>Cupo Recibido</th>
                                    <th>Cupo Nuevo</th>
                                    <th>Acción</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>


                <div class="text-center mt-3">
                    <button type="submit" class="btn btn-primary">Grabar</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        const dataVendedores = {
            "Jaime Medina": [
                { modulo: "Módulo 1", cupo: "10'000.000" },
                { modulo: "Módulo 2", cupo: "7'000.000" },
                { modulo: "Módulo 3", cupo: "4'000.000" }
            ],
            "Lupita Guadalupe": [
                { modulo: "Módulo 1", cupo: "8'000.000" },
                { modulo: "Módulo 2", cupo: "6'000.000" },
                { modulo: "Módulo 3", cupo: "5'000.000" }
            ],
            "Dipper Antonio": [
                { modulo: "Módulo 1", cupo: "9'000.000" },
                { modulo: "Módulo 2", cupo: "5'000.000" },
                { modulo: "Módulo 3", cupo: "6'000.000" }
            ],
            "Lucas Renato": [
                { modulo: "Módulo 1", cupo: "7'000.000" },
                { modulo: "Módulo 2", cupo: "8'000.000" },
                { modulo: "Módulo 3", cupo: "9'000.000" }
            ]
        };

        function actualizarTabla(vendedor, tablaId) {
            const tabla = document.getElementById(tablaId);
            const tbody = tabla.querySelector("tbody");
            tbody.innerHTML = "";

            if (dataVendedores[vendedor]) {
                dataVendedores[vendedor].forEach(item => {
                    let fila = `<tr>
                                    <td>${item.modulo}</td>
                                    <td>${item.cupo}</td>
                                    <td><input type='text' class='form-control text-center' placeholder='Ingrese cupo'></td>
                                    <td><input type='text' class='form-control text-center' placeholder='Cupo nuevo'></td>
                                    <td><a href='#'>Editar</a></td>
                                </tr>`;
                    tbody.innerHTML += fila;
                });
            }
        }

        $(document).ready(function() {
            $('#nombreVendedorA, #nombreVendedorB').on('change', function() {
                actualizarTabla($('#nombreVendedorA').val(), 'tablaVendedorA');
                actualizarTabla($('#nombreVendedorB').val(), 'tablaVendedorB');
            });
        });
    </script>
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Modal Visual</title>
        <style>
            .modal {
                display: none; 
                position: fixed;
                z-index: 1;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                justify-content: center;
                align-items: center;
            }

            .modal-content {
                background-color: white;
                padding: 20px;
                border-radius: 10px;
                width: 400px;
                text-align: center;
            }

            .modal-header {
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 15px;
            }

            .form-group {
                display: flex;
                justify-content: space-between;
                margin-bottom: 10px;
            }

            select, input {
                width: 45%;
                padding: 5px;
            }

            .modal-footer {
                margin-top: 15px;
            }

            .btn {
                padding: 8px 15px;
                border: none;
                cursor: pointer;
            }

            .btn-primary {
                background-color: blue;
                color: white;
            }

            .btn-secondary {
                background-color: gray;
                color: white;
            }
        </style>
    </head>
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Modal Visual</title>
        <style>
        
            .modal {
                display: none;
                position: fixed;
                z-index: 1;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                justify-content: center;
                align-items: center;
            }

            .modal-content {
                background-color: white;
                padding: 20px;
                border-radius: 10px;
                width: 400px;
                text-align: center;
            }

            .modal-header {
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 15px;
            }

            .form-group {
                display: flex;
                justify-content: space-between;
                margin-bottom: 10px;
            }

            select, input {
                width: 45%;
                padding: 5px;
            }

            .modal-footer {
                margin-top: 15px;
            }

            .btn {
                padding: 8px 15px;
                border: none;
                cursor: pointer;
            }

            .btn-primary {
                background-color: blue;
                color: white;
            }

            .btn-secondary {
                background-color: gray;
                color: white;
            }

            .error-message {
                color: red;
                font-size: 14px;
                display: none;
                margin-top: 10px;
            }
        </style>
    </head>
    <body>
    
        <button class="btn btn-primary" onclick="abrirModal()">Abrir Modal</button>
        <div id="cupoModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    Módulo 1 - Cupo Actual: <span style="color: blue;">100%</span>
                </div>
                <div class="modal-body">
                    <form id="cupoForm">
                      
                        <div class="form-group">
                            <select>
                                <option selected disabled>Seleccione...</option>
                                <option value="1">Módulo 1</option>
                                <option value="2">Módulo 2</option>
                                <option value="3">Módulo 3</option>
                            </select>
                            <input type="number" class="cupo-input" placeholder="Ingrese valor" min="0" max="100" oninput="validarCupo()">
                        </div>

                        <div class="form-group">
                            <select>
                                <option selected disabled>Seleccione...</option>
                                <option value="1">Módulo 1</option>
                                <option value="2">Módulo 2</option>
                                <option value="3">Módulo 3</option>
                            </select>
                            <input type="number" class="cupo-input" placeholder="Ingrese valor" min="0" max="100" oninput="validarCupo()">
                        </div>

                        <div class="form-group">
                            <select>
                                <option selected disabled>Seleccione...</option>
                                <option value="1">Módulo 1</option>
                                <option value="2">Módulo 2</option>
                                <option value="3">Módulo 3</option>
                            </select>
                            <input type="number" class="cupo-input" placeholder="Ingrese valor" min="0" max="100" oninput="validarCupo()">
                        </div>

                        <!-- Mensaje de error -->
                        <div id="error-message" class="error-message">
                            La suma de los valores no puede superar el 100%.
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="cerrarModal()">Cerrar</button>
                    <button class="btn btn-primary" onclick="guardarCupo()">Guardar</button>
                </div>
            </div>
        </div>

        <script>
            function abrirModal() {
                document.getElementById("cupoModal").style.display = "flex";
            }

            function cerrarModal() {
                document.getElementById("cupoModal").style.display = "none";
            }

            function validarCupo() {
                let inputs = document.querySelectorAll(".cupo-input");
                let total = 0;

                inputs.forEach(input => {
                    total += parseFloat(input.value) || 0;
                });

                let errorMessage = document.getElementById("error-message");

                if (total > 100) {
                    errorMessage.style.display = "block";
                } else {
                    errorMessage.style.display = "none";
                }
            }

            function guardarCupo() {
                let errorMessage = document.getElementById("error-message");

                if (errorMessage.style.display === "block") {
                    alert("Corrige los valores antes de guardar.");
                } else {
                    alert("Valores guardados correctamente.");
                    cerrarModal();
                }
            }
        </script>

    </body>
</html>

</html>

</body>
</html>

